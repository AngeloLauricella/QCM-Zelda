{% extends 'base.html.twig' %}

{% block title %}Classement Global - Zelda QCM
{% endblock %}

{% block body %}
	<header class="scores-header">
		<h1>ğŸ† Classement Global</h1>
		<p class="subtitle">Les meilleures aventures de tous les joueurs</p>
	</header>

	<main class="scores-main container_profile">
		<!-- Navigation vers les scores personnels -->
		{% if is_granted('ROLE_USER') %}
			<nav class="scores-nav">
				<a href="{{ path('app_score_my_scores') }}" class="btn btn-secondary">
					ğŸ“Š Mes Scores
				</a>
				<a href="{{ path('app_score_index') }}" class="btn btn-primary active">
					ğŸ† Leaderboard
				</a>
			</nav>
		{% endif %}

		<!-- Leaderboard -->
		{% if topScores|length > 0 %}
			<section class="leaderboard">
				<div class="leaderboard-table-wrapper">
					<table class="leaderboard-table">
						<thead>
							<tr>
								<th class="rank">Rang</th>
								<th class="player-name">Joueur</th>
								<th class="score-value">Score</th>
								<th class="score-date">Date</th>
							</tr>
						</thead>
						<tbody>
							{% for index, score in topScores %}
								{% set player = score.player %}
								<tr class="score-row{% if index == 0 %} first{% elseif index == 1 %} second{% elseif index == 2 %} third{% endif %}{% if currentUser and player.user == currentUser %} current-player{% endif %}">
									<td class="rank">
										<span class="rank-badge">
											{% if index == 0 %}
												ğŸ¥‡
											{% elseif index == 1 %}
												ğŸ¥ˆ
											{% elseif index == 2 %}
												ğŸ¥‰
											{% else %}
												#{{ index + 1 }}
											{% endif %}
										</span>
									</td>
									<td class="player-name">
										<span class="player-name-text">{{ player.name }}</span>
										{% if currentUser and player.user == currentUser %}
											<span class="badge-you">C'est toi!</span>
										{% endif %}
									</td>
									<td class="score-value">
										<span class="points-badge">{{ score.value }}</span>
									</td>
									<td class="score-date">
										<time>{{ score.createdAt|format_datetime(pattern: 'dd/MM/yyyy HH:mm') }}</time>
									</td>
								</tr>
							{% endfor %}
						</tbody>
					</table>
				</div>
			</section>
		{% else %}
			<section class="empty-state">
				<div class="empty-state-content">
					<h2>ğŸ® Aucun score pour le moment</h2>
					<p>Sois le premier Ã  crÃ©er un score en complÃ©tant une aventure!</p>
					<a href="{{ path('game_index') }}" class="btn btn-primary">
						Commencer l'Aventure
					</a>
				</div>
			</section>
		{% endif %}

		<!-- Actions -->
		<section class="scores-actions">
			<a href="{{ path('game_index') }}" class="btn btn-secondary">
				â† Retour au Jeu
			</a>
		</section>
	</main>
{% endblock %}
