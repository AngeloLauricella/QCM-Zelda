{% extends 'base.html.twig' %}

{% block title %}Ma Galerie - Articles Poss√©d√©s
{% endblock %}

{% block body %}
	<div class="gallery-container">
		<!-- Header -->
		<header class="gallery-header">
			<div class="gallery-header-content">
				<h1>üìñ Ma Galerie</h1>
				<p class="subtitle">Tes articles collect√©s</p>
			</div>

			<div class="gallery-info-bar">
				<div class="player-info">
					<span class="label">Joueur:</span>
					<span class="value">{{ player.name }}</span>
				</div>
				<div class="gallery-stats">
					<span class="label">Articles Poss√©d√©s:</span>
					<span class="value">{{ purchasedItems|length }}</span>
				</div>
			</div>

			<nav class="gallery-nav">
				<a href="{{ path('gallery_shop_index') }}" class="btn btn-primary">üõí Aller √† la Boutique</a>
				<a href="{{ path('game_index') }}" class="btn btn-secondary">üéÆ Retour au Jeu</a>
			</nav>
		</header>

		<!-- Main Content -->
		<main class="gallery-main container_profile">
			{% if purchasedItems is empty %}
				<section class="empty-state">
					<div class="empty-state-content">
						<h2>üì¶ Ta galerie est vide</h2>
						<p>Tu n'as encore achet√© aucun article. Visite la boutique pour acqu√©rir des objets de collection!</p>
						<a href="{{ path('gallery_shop_index') }}" class="btn btn-primary">
							Visiter la Boutique
						</a>
					</div>
				</section>
			{% else %}
				<section class="gallery-items">
					<h2>Tes Collections</h2>

					<div class="gallery-grid">
						{% for purchasedItem in purchasedItems %}
							{% set item = purchasedItem.galleryItem %}
							<div class="gallery-card card">
								<!-- Card Image -->
								<div class="card-image">
									{% if item.imagePath %}
										<img src="{{ asset('images/' ~ item.imagePath) }}" 
											 alt="{{ item.title }}"
											 loading="lazy">
									{% else %}
										<div class="placeholder-image">
											<span>üñºÔ∏è</span>
										</div>
									{% endif %}
									<div class="badge badge-collected">
										‚úì Collect√©
									</div>
								</div>

								<!-- Card Body -->
								<div class="card-body">
									<h3 class="item-title">{{ item.title }}</h3>
									{% if item.title %}
										<p class="item-description">{{ item.title }}</p>
									{% endif %}
								</div>

								<!-- Card Footer -->
								<div class="card-footer">
									<div class="purchase-info">
										<span class="label">Achet√© le:</span>
										<time>{{ purchasedItem.purchasedAt|date('d/m/Y H:i') }}</time>
									</div>
								</div>
							</div>
						{% endfor %}
					</div>
				</section>
			{% endif %}

			<!-- Actions -->
			<section class="gallery-actions">
				<a href="{{ path('gallery_shop_index') }}" class="btn btn-primary">
					‚Üê Retour √† la Boutique
				</a>
				<a href="{{ path('game_index') }}" class="btn btn-secondary">
					Retour au Jeu ‚Üí
				</a>
			</section>
		</main>
	</div>
{% endblock %}
