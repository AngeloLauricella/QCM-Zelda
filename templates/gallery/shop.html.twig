{% extends 'base.html.twig' %}

{% block title %}Boutique - Zelda QCM
{% endblock %}

{% block body %}
	<header class="shop-header">
		<h1>üõí Boutique</h1>
		<p class="subtitle">Achetez des troph√©es avec vos points</p>
	</header>

	<main class="shop-main">
		<aside class="shop-balance">
			<div class="balance-card">
				<h3>Vos Points</h3>
				<p class="balance">{{ progress.points }}</p>
			</div>
		</aside>

		<section class="shop-items">
			<h2>Articles Disponibles</h2>

			{% if shopItems|length > 0 %}
				<div class="items-grid">
					{% for shopItem in shopItems %}
						{% set trophy = shopItem.getTrophy() %}
						<div class="shop-item-card">
							<div class="item-icon">{{ trophy.icon }}</div>

							<h3>{{ trophy.name }}</h3>
							<p class="item-description">{{ trophy.description }}</p>

							<div class="item-effects">
								{% if trophy.heartBonus > 0 %}
									<span class="effect heart">+{{ trophy.heartBonus }}
										‚ù§Ô∏è</span>
								{% endif %}
								{% if trophy.pointsMultiplier > 1 %}
									<span class="effect points">x{{ trophy.pointsMultiplier|round(2) }}</span>
								{% endif %}
							</div>

							<div class="shop-footer">
								<p class="price">{{ shopItem.getCost() }}
									pts</p>

								<form action="{{ path('app_gallery_shop_buy', {'itemId': shopItem.getId()}) }}" method="post" class="buy-form">
									<buttonAucun{{message}}</div type="submit" class="btn btn-buy{% if progress.points < shopItem.getCost() %} disabled{% endif %}" {% if progress.points < shopItem.getCost() %}disabled{% endif %}> {% if shopItem.hasUnlimitedStock() %} acheter {% elseif shopItem.getStock() > 0 %} acheter ({{ shopItem.getStock() }} dispo) {% else %} rupture {% endif %} </button> </form> </div> </div> {% endfor %} </div> {% else %} <p class="no-items"> article disponible pour le moment.</p> {% endif %} </section> <section class="shop-actions"> <a href="{{ path('app_profile_index') }}" class="btn btn-secondary"> mon profil </a> <a href="{{ path('app_gallery_index') }}" class="btn btn-secondary"> galerie </a> </section> </main> {% if app.flashes %} <div class="flash-messages"> {% for type, messages in app.flashes %} {% for message in messages %} <div class="alert alert-{{ type }}">>
									{% endfor %}
								{% endfor %}
							</div>
						{% endif %}

					{% endblock %}
