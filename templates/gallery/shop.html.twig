{% extends 'base.html.twig' %}

{% block title %}ğŸ›’ Boutique - Articles Zelda
{% endblock %}

{% block body %}
<div class="shop-container">
	<header class="shop-header">
		<h1>ğŸ›’ Boutique d'Articles</h1>
		<div class="player-info">
			<p>Joueur:
				<strong>{{ player.name }}</strong>
			</p>
			<p class="shop-points-display">
				Tes points:
				<strong>{{ shopPoints }}
					ğŸ’</strong>
			</p>
		</div>
		<div class="shop-nav">
			<a href="{{ path('gallery_index') }}" class="btn btn-secondary">ğŸ–¼ï¸ Ma Galerie</a>
			<a href="{{ path('game_index') }}" class="btn btn-primary">ğŸ® Retour au Jeu</a>
		</div>
	</header>

	<main class="shop-main">
		<div class="shop-grid">
			{% for item in items %}
				<div class="shop-item {% if item.id in purchasedItemIds %}owned{% endif %}">
					{% if item.imagePath %}
						<img src="{{ asset('uploads/gallery/' ~ item.imagePath) }}" alt="{{ item.title }}">
					{% else %}
						<div class="no-image">ğŸ–¼ï¸</div>
					{% endif %}

					<div class="item-details">
						<h3>{{ item.title }}</h3>

						<div class="item-footer">
							<p class="item-price">
								<span class="price-label">Prix:</span>
								<strong>{{ item.price }}
									ğŸ’</strong>
							</p>

							{% if item.id in purchasedItemIds %}
								<span class="badge-owned">âœ… PossÃ©dÃ©</span>
							{% else %}
								<form action="{{ path('gallery_shop_buy', {itemId: item.id}) }}" method="post">
									<button type="submit" class="btn-buy" {% if shopPoints < item.price %}disabled{% endif %} onclick="return confirm('Acheter {{ item.title }} pour {{ item.price }} points ?')" > {% if shopPoints < item.price %} ğŸš« Points insuffisants {% else %} ğŸ’° Acheter {% endif %} </button> </form> {% endif %} </div> </div> </div> {% endfor %} </div> </main> </div> {% endblock %}
