{% extends "base.html.twig" %}

{% block title %}ğŸ° Accueil - L'Aventure d'Hyrule{% endblock %}

{% block body %}
<div class="page-home">

    <!-- HERO SECTION -->
    <section class=" zone-card {% if is_granted('ROLE_USER') %}element-fire{% else %}hero-gradient{% endif %}">
        {% if username is defined %}
            <h1 >Bienvenue, {{ username }} !</h1>

            {% if is_granted('ROLE_USER') %}
                <p>{{ username }}, ta quÃªte continue...</p>
                <p class="golden-glow ">L'empire de Hyrule compte sur toi pour repousser les tÃ©nÃ¨bres!</p>
                <div class="action-buttons">
                    {% if player is defined and player %}
                        <a href="{{ path('app_gallery') }}" class="btn btn-secondary btn-lg">Ma galerie</a>
                    {% endif %}
                    <a href="{{ path('app_profile_index') }}" class="btn btn-outline btn-lg">Mon profil</a>
                </div>
            {% else %}
                <p class="golden-glow">Ton aventure commenceâ€¦</p>
                <p>RÃ©ponds aux Ã©nigmes et deviens un hÃ©ros lÃ©gendaire!</p>
                <div class="action-buttons">
                    <a href="{{ path('app_login') }}" class="btn btn-primary btn-lg">Se connecter</a>
                    <a href="{{ path('app_register') }}" class="btn btn-accent btn-lg">S'inscrire</a>
                </div>
            {% endif %}
        {% else %}
            <h1 class="epic-text">Bienvenue, HÃ©ros!</h1>
            <p class="golden-glow">Ton aventure commenceâ€¦</p>
            <div class="action-buttons">
                <a href="{{ path('app_login') }}" class="btn btn-primary btn-lg">Se connecter</a>
                <a href="{{ path('app_register') }}" class="btn btn-accent btn-lg">S'inscrire</a>
            </div>
        {% endif %}
    </section>
                 <div class="progress-bar">
                    <div class="progress-fill"></div>
                </div> 
    <!-- NARRATIVE SECTION -->
    {% if is_granted('ROLE_USER') and player is defined and player %}
        <section class="welcome-section card card-error">
            <h2>Ta QuÃªte Actuelle</h2>
            <div class="quest-progress">
                <p class="quest-text">Progresse Ã  travers les terres d'Hyrule et maÃ®trise chaque dÃ©fi!</p>
            </div>
        </section>
    {% else %}
        <section class="welcome-section">
            <h2>L'Histoire d'Hyrule</h2>
            <div class="hero-narrative">
                <h3>Le Commencement</h3>
                <p>
                    Depuis la nuit des temps, le Royaume d'Hyrule a toujours eu besoin de hÃ©ros courageux 
                    pour affronter les dÃ©fis et les Ã©nigmes qui menacent sa paix.
                </p>
                <p>
                    Toi aussi, tu peux devenir une lÃ©gende! RÃ©ponds aux questions des trois quÃªtes 
                    (ForÃªt Perdue, Montagne SacrÃ©e et ChÃ¢teau) et dÃ©montre ta sagesse.
                </p>
            </div>
        </section>
    {% endif %}

    <!-- FEATURES SECTION -->
    <section class="features-section">
        <h2>âœ¨ Les DÃ©fis qui t'attendent</h2>
        <div class="features-grid">
            <div class="feature-card element-forest">
                <div class="feature-icon">ğŸŒ²</div>
                <h3>ForÃªt Perdue</h3>
                <p>Traverse les mystÃ¨res de la nature et rÃ©sous les Ã©nigmes cachÃ©es.</p>
            </div>
            <div class="feature-card element-mountain">
                <div class="feature-icon">â›°ï¸</div>
                <h3>Montagne SacrÃ©e</h3>
                <p>Gravir les pics et affronter les Ã©preuves les plus difficiles.</p>
            </div>
            <div class="feature-card element-dark">
                <div class="feature-icon">ğŸ°</div>
                <h3>ChÃ¢teau d'Hyrule</h3>
                <p>PÃ©nÃ¨tre le cÅ“ur de l'empire et rÃ©vÃ¨le ses secrets interdits.</p>
            </div>
            <div class="feature-card element-fire">
                <div class="feature-icon">âš¡</div>
                <h3>Ã‰preuves SpÃ©ciales</h3>
                <p>DÃ©bloquer des quÃªtes bonus et gagner des rÃ©compenses uniques.</p>
            </div>
        </div>
    </section>

    <!-- AUTHENTICATED USER STATS -->
    {% if stats is defined and player is defined and player %}
        <section class="stats-section">
            <h2>Tes Statistiques</h2>
            <div class="stats-grid">
                <div class="stat-card">
                    <div class="stat-value">{{ stats.totalAnswers }}</div>
                    <div class="stat-label">Questions ComplÃ©tÃ©es</div>
                </div>
                <div class="stat-card">
                    <div class="stat-value">{{ stats.score }}</div>
                    <div class="stat-label">Points d'ExpÃ©rience</div>
                </div>
                <div class="stat-card">
                    <div class="stat-value">{{ stats.percentage }}%</div>
                    <div class="stat-label">Taux de RÃ©ussite</div>
                </div>
                <div class="stat-card">
                    <div class="stat-value">{{ stats.hearts }}</div>
                    <div class="stat-label">CÅ“urs Restants</div>
                </div>
            </div>
        </section>
    {% endif %}

    <!-- CALL TO ACTION -->
    {% if not is_granted('ROLE_USER') %}
        <section class="call-to-action">
            <div class="card">
                <h2>ğŸ® PrÃªt Ã  Commencer l'Aventure?</h2>
                <p>Rejoins les milliers de hÃ©ros qui ont relevÃ© le dÃ©fi d'Hyrule.</p>
                <div class="action-buttons">
                    <a href="{{ path('app_register') }}" class="btn btn-primary btn-lg btn-block">âœ¨ CrÃ©er un Compte</a>
                    <a href="{{ path('app_login') }}" class="btn btn-outline btn-lg btn-block">ğŸ—ï¸ Ou Se Connecter</a>
                </div>
            </div>
        </section>
    {% endif %}

</div>
{% endblock %}
