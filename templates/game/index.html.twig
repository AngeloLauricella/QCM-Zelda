{% extends 'base.html.twig' %}

{% block title %}Zelda: Ocarina of Time - Menu Principal
{% endblock %}

{% block body %}
	<header class="game-header">
		<h1>{{ player.name }}, bienvenue!</h1>
		<p class="subtitle">L'aventure t'attend</p>
	</header>

	<main class="game-main container_profile ">
		<section class="player-stats">
			<div class="hearts-display">
				<span class="label">CÅ“urs:</span>
				<div class="hearts-container">
					{% for i in 1..maxHearts %}
						<span class="heart{% if i <= hearts %} active{% endif %}">
							<img class="card-rubis" src="{{ asset('uploads/gallery/coeurV.png') }}">
						</span>
					{% endfor %}
				</div>
				<span class="count">{{ hearts }}/{{ maxHearts }}</span>
			</div>

			<div class="points-display">
				<span class="label">Points:</span>
				<span class="points-value">{{ points }}</span>
			</div>

			<div class="shop-points-display">
				<span class="label">Points Boutique:</span>
				<span class="shop-points-value">{{ player.shopPoints }}
					<img class="card-rubis" src="{{ asset('uploads/gallery/rubis.png') }}">
				</span>
			</div>
		</section>

		{% if isGameOver %}
			<section class="game-over-section">
				<h2>ðŸŽ® GAME OVER ðŸŽ®</h2>

				<div class="final-stats">
					<p class="game-over-reason">{{ gameOverReason ?? 'Tu as perdu tous tes cÅ“urs...' }}</p>
					<p class="final-score">Score Final:
						<strong>{{ points }}</strong>
						points</p>
					<p class="shop-points-earned">
						Points Boutique Ã  gagner:
						<strong>{{ (points / 10)|round(0, 'floor') }}</strong>
						ðŸ’Ž
					</p>
				</div>

				<div class="game-over-actions">
					<form action="{{ path('game_restart') }}" method="post">
						<button type="submit" class="btn btn-restart">Rejouer et Enregistrer le Score</button>
					</form>
					<a href="{{ path('app_score_index') }}" class="btn btn-scores">Voir les Classements</a>
					<a href="{{ path('gallery_shop_index') }}" class="btn btn-shop">ðŸ›’ Boutique</a>
				</div>
			</section>
		{% else %}
			<section class="zones-container">
				<h2>Zones Disponibles</h2>

				{% if unlockedZones is empty %}
					<div class="intro-message">
						<h3>Bienvenue en Hyrule!</h3>
						<p>Ton aventure commence maintenant. Explore les terres d'Hyrule et rÃ©ponds aux dÃ©fis qui t'attendent!</p>
					</div>
				{% else %}
					{% for zone in unlockedZones %}
						<div class="zone-card unlocked">
							<h3>{{ zone.name }}</h3>
							<p class="zone-description">{{ zone.description }}</p>
							<div class="zone-info">
								<a href="{{ path('game_zone', {'zoneId': zone.id}) }}" class="btn btn-explore">
									Explorer cette zone
								</a>
							</div>
						</div>
					{% endfor %}
				{% endif %}
			</section>

			<section class="actions zone-card">
				<a href="{{ path('game_start') }}" class="btn btn-start">
					{% if unlockedZones is empty %}
						Commencer l'Aventure
					{% else %}
						Continuer l'Aventure
					{% endif %}
				</a>
				<a href="{{ path('gallery_shop_index') }}" class="btn btn-shop">Boutique</a>
				<form action="{{ path('game_new') }}" method="post" class="new-game-form">
					<button type="submit" class="btn btn-new" onclick="return confirm('âš ï¸ Attention! Toute ta progression sera perdue. Veux-tu vraiment recommencer Ã  zÃ©ro?')">
						Recommencer Ã  ZÃ©ro
					</button>
				</form>
			</section>
		{% endif %}
	</main>
{% endblock %}
